import{c as R}from"./QSelect.0a7bda2a.js";import{d as q,S as B,U as k,a0 as C,W as N,r as c,w as O,L as y,X as w,j as t,N as b,F as U,_ as A,Z as v,V as n,aL as D,$ as u,a1 as h,aX as F,aY as J,R as L}from"./index.f14f187d.js";import{Q as S}from"./QInput.57cd48c1.js";import{Q as P}from"./QForm.6bd63552.js";import{Q as X}from"./QPage.f59fa5c4.js";import{u as j}from"./use-quasar.adc7f3a0.js";import{u as z}from"./musik.store.03c06952.js";import{_ as T}from"./ConfirmDialog.09031b45.js";import"./QDialog.c2ef8648.js";import"./use-key-composition.574d14f0.js";import"./rtl.276c3f1b.js";import"./QCard.5ccc96d5.js";const W=m=>(F("data-v-00309644"),m=m(),J(),m),Y={class:"row input items-center"},Z={class:"row input"},G={class:"row input"},H={class:"row q-mt-xl"},K=W(()=>u("figcaption",{class:"q-ma-sm text-primary text-bold q-mb-xl"},null,-1)),ee=["src"],se=q({__name:"MusikEditAdmin",setup(m){const r=z(),f=B(),{musikUrl:V}=k(r),Q=C(),x=N(),_=c(),d=j(),l=c(r.getMusikById(+Q.params.id)),p=c(!1),{langOptions:M}=k(f),o=c(f.getLang()),i=c(JSON.parse(l.value.description||"")||{ru:""});i.value[`${o.value}`]||(i.value[`${o.value}`]=""),O(()=>o.value,e=>{i.value[`${e}`]||(i.value[`${e}`]="")});const $=async()=>{l.value.description=JSON.stringify(i.value),await r.update(l.value),p.value=!1},E=()=>{_.value.isShow=!0},I=async()=>{var e;_.value.isShow=!1,await r.delete((e=l.value)==null?void 0:e.id),x.push("/aquadoctor")};return(e,s)=>(y(),w(U,null,[t(X,{class:"q-mx-md q-my-sm"},{default:b(()=>[t(P,{class:v(["q-mt-xl",{"table-desktop":n(d).screen.gt.sm,"height-80vh":n(d).screen.gt.sm}]),onSubmit:D($,["prevent","stop"])},{default:b(()=>{var g;return[u("div",Y,[t(R,{class:"select",modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a),options:n(M),dense:"",outlined:"","emit-value":"","map-options":"","options-dense":"","item-aligned":""},null,8,["modelValue","options"]),t(h,{class:"q-ml-sm",outline:"",color:"primary",label:e.$t("delete"),onClick:E},null,8,["label"]),t(h,{disable:!p.value,class:"q-ml-sm",outline:"",color:"primary",label:e.$t("save"),onClick:$},null,8,["disable","label"])]),u("div",Z,[t(S,{class:v(["col-10",{"col-12":n(d).screen.lt.md}]),outlined:"",modelValue:l.value.name,"onUpdate:modelValue":[s[1]||(s[1]=a=>l.value.name=a),s[2]||(s[2]=a=>p.value=!0)],label:e.$t("name")+" *",rules:[a=>!!a||e.$t("required")]},null,8,["class","modelValue","label","rules"])]),u("div",G,[t(S,{class:v(["col-10",{"col-12":n(d).screen.lt.md}]),modelValue:i.value[`${o.value}`],"onUpdate:modelValue":[s[3]||(s[3]=a=>i.value[`${o.value}`]=a),s[4]||(s[4]=a=>p.value=!0)],label:e.$t("description")+` (${o.value})`,filled:"",type:"textarea",rows:"10"},null,8,["class","modelValue","label"])]),u("figure",H,[K,u("audio",{controls:"",src:`${n(V)}/${(g=l.value)==null?void 0:g.path}`,class:v(["col-10",{"col-12":n(d).screen.lt.md}])},null,10,ee)])]}),_:1},8,["class"])]),_:1}),t(T,{ref_key:"confirmDelete",ref:_,onOk:I,description:e.$t("deleteRecord"),message:l.value.name},null,8,["description","message"])],64))}});var ae=A(se,[["__scopeId","data-v-00309644"]]);const te={class:"q-mx-md q-my-sm"},_e=q({__name:"MusikEditPage",setup(m){return(r,f)=>(y(),w("section",te,[u("h5",null,L(r.$t("aquadoctor")),1),t(ae)]))}});export{_e as default};
