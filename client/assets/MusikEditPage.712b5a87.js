import{c as I}from"./QSelect.18c46ac5.js";import{d as y,S as B,U as g,a0 as C,r as c,w as N,L as q,X as w,j as l,N as k,F as O,_ as R,Z as v,V as n,aM as U,$ as u,a1 as S,aK as A,aL as D,R as F}from"./index.34c1c7f1.js";import{Q as h}from"./QInput.d1b28a15.js";import{Q as J}from"./QForm.f0f7267e.js";import{Q as L}from"./QPage.a6d7ad4e.js";import{u as P}from"./use-quasar.cbcb6105.js";import{u as j}from"./musik.store.6389b70a.js";import{_ as z}from"./ConfirmDialog.e39e9a37.js";import"./QDialog.b75cd759.js";import"./use-key-composition.8cd488cc.js";import"./rtl.276c3f1b.js";import"./QCard.4c1cee69.js";const K=m=>(A("data-v-7b753dcf"),m=m(),D(),m),T={class:"row input items-center"},X={class:"row input"},Z={class:"row input"},G={class:"row q-mt-xl"},H=K(()=>u("figcaption",{class:"q-ma-sm text-primary text-bold q-mb-xl"},null,-1)),W=["src"],Y=y({__name:"MusikEditAdmin",setup(m){const r=j(),f=B(),{musikUrl:V}=g(r),Q=C(),_=c(),d=P(),t=c(r.getMusikById(+Q.params.id)),p=c(!1),{langOptions:M}=g(f),o=c(f.getLang()),i=c(JSON.parse(t.value.description||"")||{ru:""});i.value[`${o.value}`]||(i.value[`${o.value}`]=""),N(()=>o.value,e=>{i.value[`${e}`]||(i.value[`${e}`]="")});const $=async()=>{t.value.description=JSON.stringify(i.value),await r.update(t.value),p.value=!1},x=()=>{_.value.isShow=!0},E=async()=>{var e;_.value.isShow=!1,await r.delete((e=t.value)==null?void 0:e.id)};return(e,s)=>(q(),w(O,null,[l(L,{class:"q-mx-md q-my-sm"},{default:k(()=>[l(J,{class:v(["q-mt-xl",{"table-desktop":n(d).screen.gt.sm,"height-80vh":n(d).screen.gt.sm}]),onSubmit:U($,["prevent","stop"])},{default:k(()=>{var b;return[u("div",T,[l(I,{class:"select",modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=a=>o.value=a),options:n(M),dense:"",outlined:"","emit-value":"","map-options":"","options-dense":"","item-aligned":""},null,8,["modelValue","options"]),l(S,{class:"q-ml-sm",outline:"",color:"primary",label:e.$t("delete"),onClick:x},null,8,["label"]),l(S,{disable:!p.value,class:"q-ml-sm",outline:"",color:"primary",label:e.$t("save"),onClick:$},null,8,["disable","label"])]),u("div",X,[l(h,{class:v(["col-10",{"col-12":n(d).screen.lt.md}]),outlined:"",modelValue:t.value.name,"onUpdate:modelValue":[s[1]||(s[1]=a=>t.value.name=a),s[2]||(s[2]=a=>p.value=!0)],label:e.$t("name")+" *",rules:[a=>!!a||e.$t("required")]},null,8,["class","modelValue","label","rules"])]),u("div",Z,[l(h,{class:v(["col-10",{"col-12":n(d).screen.lt.md}]),modelValue:i.value[`${o.value}`],"onUpdate:modelValue":[s[3]||(s[3]=a=>i.value[`${o.value}`]=a),s[4]||(s[4]=a=>p.value=!0)],label:e.$t("description")+` (${o.value})`,filled:"",type:"textarea",rows:"10"},null,8,["class","modelValue","label"])]),u("figure",G,[H,u("audio",{controls:"",src:`${n(V)}/${(b=t.value)==null?void 0:b.path}`,class:v(["col-10",{"col-12":n(d).screen.lt.md}])},null,10,W)])]}),_:1},8,["class"])]),_:1}),l(z,{ref_key:"confirmDelete",ref:_,onOk:E,description:e.$t("deleteRecord"),message:t.value.name},null,8,["description","message"])],64))}});var ee=R(Y,[["__scopeId","data-v-7b753dcf"]]);const se={class:"q-mx-md q-my-sm"},ve=y({__name:"MusikEditPage",setup(m){return(r,f)=>(q(),w("section",se,[u("h5",null,F(r.$t("aquadoctor")),1),l(ee)]))}});export{ve as default};
