import{Q as L,a as S,b as T,c as y}from"./QTable.0b29bf85.js";import{Q as q}from"./QTooltip.cff6d000.js";import{a5 as x,aV as f,d as V,U as B,r as w,L as i,X as k,V as d,M as u,N as a,Z as b,j as r,F as D,_ as H,Y as I,P as m,R as g,$ as _,a1 as N,aM as R}from"./index.907ec7d0.js";import{d as z}from"./date.6cb8b7e3.js";import{_ as j}from"./ConfirmDialog.eece0af5.js";import{L as F}from"./LoadingSpinner.4f337829.js";const O=x("diagnostic",{state:()=>({diagnostics:[],loading:!1}),getters:{},actions:{async load(t){this.loading=!0;const o=await f.find(`diagnostics/${t}`);o.error||(this.diagnostics=o.data),this.loading=!1},async insert(t){const o=await f.insert("diagnostics",t);o.error||this.diagnostics.push(o.data)},async delete(t){!t||await f.delete("diagnostics",t)}}});const E={class:"row justify-end"},P={class:"item-control-delete"},U={class:"q-gutter-xs"},X=V({__name:"DiagnosticList",props:{userId:{}},setup(t){const{formatDate:o}=z,h=t,$=[{name:"created",required:!0,label:"created",align:"left",field:e=>`${e.created}`,format:e=>`${e}`,sortable:!1},{name:"id",required:!0,label:"blank",align:"right",field:e=>e.id,format:e=>`${e}`,sortable:!1}],n=O(),{diagnostics:M,loading:Y}=B(n),c=w(),p=w(null);n.load(h.userId);const Q=async()=>{var e;c.value.isShow=!1,await n.delete((e=p.value)==null?void 0:e.id),await n.load(h.userId)},C=e=>{p.value=e,c.value.isShow=!0};return(e,Z)=>{var v;return i(),k(D,null,[d(Y)?(i(),u(F,{key:0})):(i(),u(L,{key:1,class:b({"table-desktop":e.$q.screen.gt.sm,"height-80vh":e.$q.screen.gt.sm}),flat:"",bordered:"","virtual-scroll":"",rows:d(M),columns:$,"row-key":"name","rows-per-page-options":[15,20,25,50,0],separator:"horizontal"},{header:a(s=>[r(T,{props:s},{default:a(()=>[(i(!0),k(D,null,I(s.cols,l=>(i(),u(S,{key:l.name,props:s,class:b(["text-uppercase text-primary",{right:l.name==="id"}])},{default:a(()=>[m(g(e.$t(l.label)),1)]),_:2},1032,["props","class"]))),128))]),_:2},1032,["props"])]),"body-cell-created":a(s=>[r(y,{props:s,style:{"text-align":"left"}},{default:a(()=>[m(g(d(o)(s.row.created,"YYYY-MM-DD:HH-MM a")),1)]),_:2},1032,["props"])]),"body-cell-id":a(s=>[r(y,{props:s},{default:a(()=>[_("div",E,[_("div",P,[_("div",U,[r(N,{class:"q-mr-sm",size:"12px",flat:"",dense:"",round:"",icon:"mdi-close-circle",onClickCapture:R(l=>C(s.row),["stop"])},{default:a(()=>[r(q,null,{default:a(()=>[m(g(e.$t("delete")),1)]),_:1})]),_:2},1032,["onClickCapture"])])])])]),_:2},1032,["props"])]),_:1},8,["class","rows"])),r(j,{ref_key:"confirmDelete",ref:c,onOk:Q,description:e.$t("deleteRecord"),message:d(o)((v=p.value)==null?void 0:v.created,"YYYY-MM-DD:HH-MM a")},null,8,["description","message"])],64)}}});var se=H(X,[["__scopeId","data-v-46bfc5c6"]]);export{se as D};
