import{Q as x,a as V,b as B,c as _}from"./QTable.d8668e2c.js";import{Q as N}from"./QTooltip.52655fa7.js";import{a5 as H,aV as h,d as I,U as R,r as k,L as o,X as u,V as f,M as v,N as t,Z as $,j as i,F as y,_ as z,Y as M,P as D,R as n,$ as d,a1 as O,aM as j}from"./index.34c1c7f1.js";import{d as F}from"./date.7d2e4f04.js";import{_ as A}from"./ConfirmDialog.e39e9a37.js";import{L as E}from"./LoadingSpinner.4528b788.js";const J=H("diagnostic",{state:()=>({diagnostics:[],loading:!1}),getters:{},actions:{async load(s){this.loading=!0;const r=await h.find(`diagnostics/${s}`);r.error||(this.diagnostics=r.data),this.loading=!1},async insert(s){const r=await h.insert("diagnostics",s);r.error||this.diagnostics.push(r.data)},async delete(s){!s||await h.delete("diagnostics",s)}}});const P={class:"q-mb-sm"},U={class:"row justify-end"},X={class:"item-control-delete"},Z={class:"q-gutter-xs"},G=I({__name:"DiagnosticList",props:{userId:{}},setup(s){const{formatDate:r}=F,b=s,q=[{name:"created",required:!0,label:"created",align:"left",field:e=>`${e.created}`,format:e=>`${e}`,sortable:!1},{name:"metaData",required:!0,label:"blank",align:"left",field:e=>e.metaData,format:e=>`${e}`,sortable:!1},{name:"id",required:!0,label:"blank",align:"right",field:e=>e.id,format:e=>`${e}`,sortable:!1}],c=J(),{diagnostics:Y,loading:L}=R(c),m=k(),p=k(null);c.load(b.userId);const Q=async()=>{var e;m.value.isShow=!1,await c.delete((e=p.value)==null?void 0:e.id),await c.load(b.userId)},S=e=>{p.value=e,m.value.isShow=!0},C=e=>{const g=JSON.parse(e);return g.aquadoctor==null?{}:g.aquadoctor};return(e,g)=>{var w;return o(),u(y,null,[f(L)?(o(),v(E,{key:0})):(o(),v(x,{key:1,class:$({"table-desktop":e.$q.screen.gt.sm,"height-80vh":e.$q.screen.gt.sm}),flat:"",bordered:"","virtual-scroll":"",rows:f(Y),columns:q,"row-key":"name","rows-per-page-options":[15,20,25,50,0],separator:"horizontal"},{header:t(a=>[i(B,{props:a},{default:t(()=>[(o(!0),u(y,null,M(a.cols,l=>(o(),v(V,{key:l.name,props:a,class:$(["text-uppercase text-primary",{right:l.name==="id"}])},{default:t(()=>[D(n(e.$t(l.label)),1)]),_:2},1032,["props","class"]))),128))]),_:2},1032,["props"])]),"body-cell-created":t(a=>[i(_,{props:a,style:{"text-align":"left"}},{default:t(()=>[D(n(f(r)(+a.row.created,"YYYY-MM-DD --- HH:MM a")),1)]),_:2},1032,["props"])]),"body-cell-metaData":t(a=>[i(_,{props:a,style:{"text-align":"left"}},{default:t(()=>[d("div",P,n(e.$t("metaDataAquadoctorLabel")),1),(o(!0),u(y,null,M(C(a.row.metaData),(l,T)=>(o(),u("div",{key:T},[d("div",null,n(l),1)]))),128))]),_:2},1032,["props"])]),"body-cell-id":t(a=>[i(_,{props:a},{default:t(()=>[d("div",U,[d("div",X,[d("div",Z,[i(O,{class:"q-mr-sm",size:"12px",flat:"",dense:"",round:"",icon:"mdi-close-circle",onClickCapture:j(l=>S(a.row),["stop"])},{default:t(()=>[i(N,null,{default:t(()=>[D(n(e.$t("delete")),1)]),_:1})]),_:2},1032,["onClickCapture"])])])])]),_:2},1032,["props"])]),_:1},8,["class","rows"])),i(A,{ref_key:"confirmDelete",ref:m,onOk:Q,description:e.$t("deleteRecord"),message:f(r)((w=p.value)==null?void 0:w.created,"YYYY-MM-DD  HH-MM a")},null,8,["description","message"])],64)}}});var re=z(G,[["__scopeId","data-v-5f8cf63e"]]);export{re as D};
